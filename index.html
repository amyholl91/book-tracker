<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö My Book Library</title>
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
        import { getFirestore, collection, doc, setDoc, getDoc, getDocs, onSnapshot } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyDoApfCmA_jDfIFXnA78x2fz3cdDwV526c",
            authDomain: "book-tracker-ah91.firebaseapp.com",
            projectId: "book-tracker-ah91",
            storageBucket: "book-tracker-ah91.firebasestorage.app",
            messagingSenderId: "512092212283",
            appId: "1:512092212283:web:7558c3eb9df4fe7cd4201e",
            measurementId: "G-HL8DBNDPB4"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Make db available globally
        window.firebaseDB = db;
        window.firebaseReady = true;
    </script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #0a2540 0%, #1a4d6d 100%);
            color: #e8f4f8;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { text-align: center; color: #66cccc; font-size: 2.5em; margin-bottom: 10px; }
        .subtitle { text-align: center; color: #a3d5d3; margin-bottom: 30px; }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: rgba(45, 95, 122, 0.3);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(102, 204, 204, 0.4);
        }
        .stat-number { 
            font-size: 2.5em; 
            color: #66cccc; 
            font-weight: bold; 
            word-break: break-word;
            line-height: 1.2;
        }
        .stat-number.book-title {
            font-size: 1.2em;
        }
        .stat-label { color: #a3d5d3; margin-top: 8px; font-size: 1.1em; }
        
        .controls-wrapper {
            margin-bottom: 25px;
        }
        .controls-row-1 {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        .controls-row-2 {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .search-box {
            flex: 1;
            min-width: 250px;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #66cccc;
            border-radius: 10px;
            background: rgba(10, 37, 64, 0.5);
            color: #e8f4f8;
        }
        .search-box::placeholder { color: #7eb8b8; }
        
        select {
            padding: 15px;
            font-size: 1em;
            border: 2px solid #66cccc;
            border-radius: 10px;
            background: rgba(10, 37, 64, 0.5);
            color: #e8f4f8;
            cursor: pointer;
        }
        select option {
            background: #0a2540;
            color: #e8f4f8;
        }
        
        .control-btn {
            padding: 10px 15px;
            font-size: 0.95em;
            border: 2px solid #66cccc;
            border-radius: 8px;
            background: rgba(102, 204, 204, 0.3);
            color: #e8f4f8;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            white-space: nowrap;
        }
        .control-btn:hover {
            background: rgba(102, 204, 204, 0.5);
            transform: translateY(-2px);
        }
        .control-btn.series-btn.active {
            background: rgba(102, 153, 204, 0.7);
            border-color: #4d7c99;
        }
        .control-btn.log-reading-btn.logged-today {
            background: rgba(102, 204, 102, 0.6);
            border-color: #4ade80;
        }
        
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        .book-card {
            background: linear-gradient(135deg, rgba(45, 95, 122, 0.4) 0%, rgba(10, 37, 64, 0.6) 100%);
            border: 2px solid rgba(102, 204, 204, 0.3);
            border-radius: 15px;
            padding: 20px;
            padding-right: 100px;
            transition: all 0.3s ease;
            position: relative !important;
            overflow: hidden;
            min-height: 95px;
        }
        .book-card:hover {
            border-color: #66cccc;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        .book-title {
            font-size: 1.3em;
            color: #66cccc;
            font-weight: bold;
            margin-bottom: 10px;
            line-height: 1.3;
        }
        .book-author {
            color: #a3d5d3;
            margin-bottom: 8px;
            font-size: 1.05em;
        }
        .book-series {
            color: #7eb8b8;
            font-size: 0.95em;
            margin-bottom: 8px;
            font-style: italic;
        }
        .book-spice {
            display: inline-block;
            padding: 6px 12px;
            background: rgba(102, 204, 204, 0.2);
            border-radius: 6px;
            font-size: 0.9em;
            margin-top: 8px;
        }
        
        .book-rating {
            margin: 10px 0;
        }
        .star {
            font-size: 1.5em;
            cursor: pointer;
            color: #444;
            transition: color 0.2s;
        }
        .star.filled {
            color: #ffd700;
        }
        .star:hover {
            color: #ffd700;
        }
        
        .book-status {
            margin: 10px 0;
            font-size: 0.9em;
        }
        .book-status label {
            display: inline-block;
            margin-right: 15px;
            cursor: pointer;
        }
        .book-status input {
            margin-right: 5px;
        }
        
        .edit-btn {
            width: 100%;
            padding: 8px;
            margin-top: 10px;
            background: rgba(102, 204, 204, 0.3);
            border: 2px solid #66cccc;
            color: #e8f4f8;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
        }
        .edit-btn:hover {
            background: rgba(102, 204, 204, 0.5);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow-y: auto;
        }
        .modal-content {
            background: linear-gradient(135deg, #0a2540 0%, #1a4d6d 100%);
            margin: 50px auto;
            padding: 30px;
            border: 2px solid #66cccc;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
        }
        .calendar-modal .modal-content {
            max-width: 800px;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .calendar-nav {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .calendar-nav button {
            padding: 8px 15px;
            background: rgba(102, 204, 204, 0.3);
            border: 2px solid #66cccc;
            border-radius: 8px;
            color: #e8f4f8;
            cursor: pointer;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 15px;
        }
        .calendar-day-header {
            text-align: center;
            padding: 10px;
            color: #66cccc;
            font-weight: bold;
            font-size: 0.9em;
        }
        .calendar-day {
            aspect-ratio: 1;
            padding: 2px;
            background: rgba(45, 95, 122, 0.3);
            border: 1px solid rgba(102, 204, 204, 0.3);
            border-radius: 5px;
            text-align: center;
            font-size: 0.9em;
            display: flex;
            flex-direction: column;
            gap: 1px;
            overflow: hidden;
        }
        .calendar-day-number {
            font-size: 0.7em;
            color: #e8f4f8;
            line-height: 1;
        }
        .calendar-day-covers {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            justify-content: center;
            align-items: center;
            flex: 1;
        }
        .calendar-mini-cover {
            width: 50px;
            height: 75px;
            object-fit: cover;
            border-radius: 3px;
            border: 1px solid rgba(102, 204, 204, 0.5);
        }
        .calendar-mini-cover.multiple {
            width: 28px;
            height: 42px;
        }
        .calendar-cover-placeholder {
            width: 50px;
            height: 75px;
            background: rgba(102, 204, 204, 0.3);
            border: 1px solid rgba(102, 204, 204, 0.5);
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #66cccc;
        }
        .calendar-cover-placeholder.multiple {
            width: 28px;
            height: 42px;
            font-size: 0.9em;
        }
        .calendar-more-books {
            font-size: 0.7em;
            color: #66cccc;
            background: rgba(102, 204, 204, 0.3);
            padding: 2px 5px;
            border-radius: 3px;
            margin-top: 2px;
        }
        .calendar-day.other-month {
            opacity: 0.3;
        }
        .calendar-day.today {
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.8);
            font-weight: bold;
        }
        .calendar-day.has-books {
            background: rgba(102, 204, 204, 0.3);
        }
        .calendar-day.logged-day {
            border: 2px solid #fbbf24;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }
        .calendar-day:not(.other-month) {
            cursor: pointer;
        }
        .calendar-day:not(.other-month):hover {
            background: rgba(102, 204, 204, 0.4);
            border-color: #66cccc;
        }
        .modal h2 {
            color: #66cccc;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            color: #a3d5d3;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 10px;
            background: rgba(10, 37, 64, 0.5);
            border: 2px solid #66cccc;
            border-radius: 8px;
            color: #e8f4f8;
            font-family: Arial, sans-serif;
        }
        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }
        .autocomplete-container {
            position: relative;
        }
        .autocomplete-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(10, 37, 64, 0.95);
            border: 2px solid #66cccc;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }
        .autocomplete-suggestion {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid rgba(102, 204, 204, 0.2);
            color: #e8f4f8;
        }
        .autocomplete-suggestion:hover {
            background: rgba(102, 204, 204, 0.3);
        }
        .autocomplete-suggestion.duplicate {
            color: #fbbf24;
        }
        .autocomplete-suggestion .suggestion-title {
            font-weight: bold;
        }
        .autocomplete-suggestion .suggestion-author {
            font-size: 0.9em;
            color: #a3d5d3;
            margin-top: 3px;
        }
        .autocomplete-suggestion .suggestion-badge {
            display: inline-block;
            padding: 2px 8px;
            background: rgba(251, 191, 36, 0.3);
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .modal-buttons button {
            flex: 1;
            padding: 12px;
            border: 2px solid #66cccc;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.2s;
        }
        .btn-save {
            background: rgba(102, 204, 204, 0.5);
            color: #e8f4f8;
        }
        .btn-save:hover {
            background: rgba(102, 204, 204, 0.7);
        }
        .btn-cancel {
            background: rgba(150, 50, 50, 0.5);
            color: #e8f4f8;
        }
        .btn-cancel:hover {
            background: rgba(150, 50, 50, 0.7);
        }
        .btn-delete {
            background: rgba(200, 50, 50, 0.5);
            color: #e8f4f8;
        }
        .btn-delete:hover {
            background: rgba(200, 50, 50, 0.8);
        }
        
        .book-extra-info {
            margin-top: 10px;
            font-size: 0.85em;
            color: #7eb8b8;
        }
        
        .series-section {
            margin-bottom: 40px;
        }
        .series-header {
            font-size: 1.8em;
            color: #66cccc;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(45, 95, 122, 0.4);
            border-left: 5px solid #66cccc;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }
        .series-header-title {
            flex: 1;
        }
        .mark-series-btn {
            padding: 10px 20px;
            font-size: 0.6em;
            border: 2px solid #66cccc;
            border-radius: 8px;
            background: rgba(102, 204, 204, 0.3);
            color: #e8f4f8;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .mark-series-btn:hover {
            background: rgba(102, 204, 204, 0.6);
        }
        .series-books {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .no-results {
            text-align: center;
            color: #7eb8b8;
            font-size: 1.3em;
            margin-top: 50px;
            display: none;
        }
        
        /* Book cover styling */
        .book-cover-container-right {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 80px;
            height: 120px;
        }
        .book-cover-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid rgba(102, 204, 204, 0.3);
            display: none;
        }
        .book-cover-placeholder-right {
            width: 100%;
            height: 100%;
            background: rgba(102, 204, 204, 0.2);
            border: 1px solid rgba(102, 204, 204, 0.4);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            font-weight: bold;
            color: #66cccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö My Book Library</h1>
        <div class="subtitle">Your Complete Romance & Fantasy Collection</div>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="total-books">0</div>
                <div class="stat-label">Total Books</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="books-read">0</div>
                <div class="stat-label">Read</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="currently-reading-title">-</div>
                <div class="stat-label">Currently Reading</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avg-rating">-</div>
                <div class="stat-label">Avg Rating</div>
            </div>
            <div class="stat-card streak-card" id="streak-card" onclick="logTodaysReading()">
                <div class="stat-number" id="reading-streak">0</div>
                <div class="stat-label">Day Streak üî•</div>
                <div class="streak-hint">Click to log today!</div>
            </div>
        </div>
        
        <div class="controls-wrapper">
            <div class="controls-row-1">
                <input type="text" class="search-box" id="search-box" placeholder="üîç Search by title, author, or series...">
                
                <select id="sort-select">
                    <option value="">Sort by...</option>
                    <option value="title">Title (A-Z)</option>
                    <option value="author">Author (A-Z)</option>
                    <option value="rating">Rating (High-Low)</option>
                </select>
                
                <select id="filter-select">
                    <option value="all">All Books</option>
                    <option value="read">Read</option>
                    <option value="unread">Unread</option>
                    <option value="reading">Currently Reading</option>
                </select>
            </div>
            
            <div class="controls-row-2">
                <button class="control-btn" onclick="openAddModal()">‚ûï Add Book</button>
                <button class="control-btn" onclick="pickRandomBook()">üé≤ Random</button>
                <button class="control-btn series-btn" onclick="toggleSeriesView()">üìö Series View</button>
                <button class="control-btn" onclick="openCalendar()">üìÖ Calendar</button>
                <button class="control-btn" onclick="autoFetchISBNs()">üìö Fetch ISBNs</button>
            </div>
        </div>
        
        <div class="books-grid" id="books-grid"></div>
        <div class="no-results" id="no-results">No books found.</div>
    </div>
    
    <!-- Edit Modal -->
    <div class="modal" id="edit-modal">
        <div class="modal-content">
            <h2>Edit Book</h2>
            <div class="form-group">
                <label>Title</label>
                <input type="text" id="edit-title">
            </div>
            <div class="form-group">
                <label>Author</label>
                <input type="text" id="edit-author">
            </div>
            <div class="form-group">
                <label>Series</label>
                <input type="text" id="edit-series" placeholder="Series Name #1">
            </div>
            <div class="form-group">
                <label>ISBN</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="edit-isbn" placeholder="e.g., 9780316055434" style="flex: 1;">
                    <button class="control-btn" onclick="lookupISBN('edit')" style="white-space: nowrap;">üîç Find ISBN</button>
                </div>
                <div id="isbn-results" style="margin-top: 10px;"></div>
            </div>
            <div class="form-group">
                <label>Custom Cover Image (optional override)</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="file" id="edit-cover-upload" accept="image/*" style="flex: 1; padding: 8px; background: rgba(10, 37, 64, 0.5); border: 2px solid #66cccc; border-radius: 8px; color: #e8f4f8;">
                    <button class="control-btn" onclick="clearCustomCover()" style="white-space: nowrap;">‚ùå Clear</button>
                </div>
                <div id="cover-preview" style="margin-top: 10px;"></div>
            </div>
            <div class="form-group">
                <label>Spice Level</label>
                <select id="edit-spice">
                    <option value="">None</option>
                    <option value="No Spice üíñ">No Spice üíñ</option>
                    <option value="Some Spice üå∂Ô∏è">Some Spice üå∂Ô∏è</option>
                    <option value="Spicy üî•">Spicy üî•</option>
                    <option value="Extra Spicy ü•µ">Extra Spicy ü•µ</option>
                </select>
            </div>
            <div class="form-group">
                <label>Notes</label>
                <textarea id="edit-notes"></textarea>
            </div>
            <div class="form-group">
                <label>Date Started</label>
                <input type="date" id="edit-date-start">
            </div>
            <div class="form-group">
                <label>Date Finished</label>
                <input type="date" id="edit-date">
            </div>
            <div class="form-group">
                <label>Re-read Count</label>
                <input type="number" id="edit-reread" min="0">
            </div>
            <div class="form-group">
                <label>Tags (comma separated)</label>
                <input type="text" id="edit-tags" placeholder="Adventurous, Dark, etc.">
            </div>
            <div class="modal-buttons">
                <button class="btn-save" type="button" onclick="saveEdit()">Save</button>
                <button class="btn-cancel" type="button" onclick="closeModal()">Cancel</button>
            </div>
            <div style="margin-top: 15px; text-align: center;">
                <button class="btn-delete" type="button" onclick="deleteBook()" style="width: 100%;">üóëÔ∏è Delete Book</button>
            </div>
        </div>
    </div>
    
    <!-- Random Book Modal -->
    <div class="modal" id="random-modal">
        <div class="modal-content" style="text-align: center;">
            <div id="random-result"></div>
            <div style="margin-top: 30px;">
                <button class="btn-save" onclick="closeRandomModal()" style="width: 200px;">Got it! üëç</button>
            </div>
        </div>
    </div>
    
    <!-- Add New Book Modal -->
    <div class="modal" id="add-modal">
        <div class="modal-content">
            <h2>‚ûï Add New Book</h2>
            <div class="form-group">
                <label>Title *</label>
                <div class="autocomplete-container">
                    <input type="text" id="add-title" placeholder="Required" autocomplete="off">
                    <div class="autocomplete-suggestions" id="title-suggestions"></div>
                </div>
            </div>
            <div class="form-group">
                <label>Author *</label>
                <input type="text" id="add-author" placeholder="Required">
            </div>
            <div class="form-group">
                <label>Series</label>
                <input type="text" id="add-series" placeholder="Series Name #1">
            </div>
            <div class="form-group">
                <label>ISBN (optional)</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="add-isbn" placeholder="e.g., 9780316055434" style="flex: 1;">
                    <button class="control-btn" onclick="lookupISBN('add')" style="white-space: nowrap;">üîç Find ISBN</button>
                </div>
                <div id="add-isbn-results" style="margin-top: 10px;"></div>
            </div>
            <div class="form-group">
                <label>Spice Level</label>
                <select id="add-spice">
                    <option value="">None</option>
                    <option value="No Spice üíñ">No Spice üíñ</option>
                    <option value="Some Spice üå∂Ô∏è">Some Spice üå∂Ô∏è</option>
                    <option value="Spicy üî•">Spicy üî•</option>
                    <option value="Extra Spicy ü•µ">Extra Spicy ü•µ</option>
                </select>
            </div>
            <div class="form-group">
                <label>Tags (comma separated)</label>
                <input type="text" id="add-tags" placeholder="Adventurous, Dark, etc.">
            </div>
            <div class="modal-buttons">
                <button class="btn-save" onclick="addNewBook()">Add Book</button>
                <button class="btn-cancel" onclick="closeAddModal()">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div class="modal" id="delete-confirm-modal">
        <div class="modal-content" style="max-width: 500px;">
            <h2 style="color: #ff6b6b;">‚ö†Ô∏è Delete Book?</h2>
            <p style="font-size: 1.2em; margin: 20px 0; color: #e8f4f8;" id="delete-book-name"></p>
            <p style="color: #a3d5d3; margin-bottom: 30px;">This cannot be undone!</p>
            <div class="modal-buttons">
                <button class="btn-delete" type="button" onclick="confirmDeleteBook()" style="flex: 1;">Yes, Delete</button>
                <button class="btn-cancel" type="button" onclick="cancelDeleteBook()" style="flex: 1;">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Mark Series as Read Confirmation Modal -->
    <div class="modal" id="series-confirm-modal">
        <div class="modal-content" style="max-width: 500px;">
            <h2 style="color: #66cccc;">üìö Mark Series as Read?</h2>
            <p style="font-size: 1.2em; margin: 20px 0; color: #e8f4f8;" id="series-confirm-text"></p>
            <div class="modal-buttons">
                <button class="btn-save" type="button" onclick="confirmMarkSeriesAsRead()">Yes, Mark as Read</button>
                <button class="btn-cancel" type="button" onclick="cancelMarkSeriesAsRead()">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Calendar Modal -->
    <div class="modal calendar-modal" id="calendar-modal">
        <div class="modal-content">
            <div class="calendar-header">
                <h2 id="calendar-month-year">January 2026</h2>
                <div class="calendar-nav">
                    <button onclick="changeMonth(-1)">‚Üê Prev</button>
                    <button onclick="goToToday()">Today</button>
                    <button onclick="changeMonth(1)">Next ‚Üí</button>
                </div>
                <button class="btn-cancel" onclick="closeCalendar()">Close</button>
            </div>
            
            <div style="text-align: center; margin: 15px 0; padding: 15px; background: rgba(102, 204, 204, 0.2); border-radius: 10px;">
                <div style="font-size: 2em; color: #66cccc; font-weight: bold;" id="calendar-streak">0</div>
                <div style="color: #a3d5d3; margin-top: 5px;">Day Reading Streak üî•</div>
            </div>
            
            <div class="calendar-grid">
                <div class="calendar-day-header">Sun</div>
                <div class="calendar-day-header">Mon</div>
                <div class="calendar-day-header">Tue</div>
                <div class="calendar-day-header">Wed</div>
                <div class="calendar-day-header">Thu</div>
                <div class="calendar-day-header">Fri</div>
                <div class="calendar-day-header">Sat</div>
            </div>
            <div class="calendar-grid" id="calendar-days"></div>
        </div>
    </div>
    
    <script>
        console.log('üìö Book Tracker Starting...');
        
        let library = [{"id": 1000, "title": "A Court of Frost and Starlight", "author": "Sarah J. Maas", "series": "A Court of Thorns and Roses #3.5", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781681195926"}, {"id": 1001, "title": "A Court of Mist and Fury", "author": "Sarah J. Maas", "series": "A Court of Thorns and Roses #2", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781619634459"}, {"id": 1002, "title": "A Court of Silver Flames", "author": "Sarah J. Maas", "series": "A Court of Thorns and Roses #4", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781635574043"}, {"id": 1003, "title": "A Court of Thorns and Roses", "author": "Sarah J. Maas", "series": "A Court of Thorns and Roses #1", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781619634442"}, {"id": 1004, "title": "A Court of Wings and Ruin", "author": "Sarah J. Maas", "series": "A Court of Thorns and Roses #3", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781681195773"}, {"id": 1005, "title": "A Cursed Heart", "author": "Jenny Hickman", "series": "Myths of Airren #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1006, "title": "A Cursed Kiss", "author": "Jenny Hickman", "series": "Myths of Airren #1", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1007, "title": "A Cursed Love", "author": "Jenny Hickman", "series": "Myths of Airren #3", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1008, "title": "A Dawn of Onyx", "author": "Kate Golden", "series": "The Sacred Stones #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1009, "title": "A Fate Forged in Fire", "author": "Hazel McBride", "series": "Bonded to Beasts", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1010, "title": "A Fire in the Sky", "author": "Sophie Jordan", "series": "A Fire in the Sky #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1011, "title": "A Kingdom of Flesh and Fire", "author": "Jennifer L. Armentrout", "series": "Blood and Ash #2", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781952457210"}, {"id": 1012, "title": "A Kiss of Iron", "author": "Clare Sager", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1013, "title": "A Promise of Peridot", "author": "Kate Golden", "series": "The Sacred Stones #2", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1014, "title": "A Queen's Game", "author": "Eri Leigh", "series": "Aithyr Uprising #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1015, "title": "A Reign of Rose", "author": "Kate Golden", "series": "The Sacred Stones #3", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1016, "title": "A Shadow in the Ember", "author": "Jennifer L. Armentout", "series": "", "spice": "", "tags": ["Adventurous"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1017, "title": "A Thorn in Every Heart", "author": "Kate King", "series": "Enchanted Legacies #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1018, "title": "Accomplice to the Villain", "author": "Hannah Nicole Maehrer", "series": "Assistant to the Villain #3", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1019, "title": "American Royals", "author": "Katharine McGee", "series": "American Royals #1", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781984830166"}, {"id": 1020, "title": "Amid Clouds and Bones", "author": "Ella Fields", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1021, "title": "An Heir Comes to Rise", "author": "C.C. Pe\u00f1aranda", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1022, "title": "Anathema", "author": "Keri Lake", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1023, "title": "Avalon Tower", "author": "Alex Rivers & C.N. Crawford", "series": "Fey Spy Academy", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1024, "title": "Beg Borrow or Steal", "author": "Sarah Adams", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1025, "title": "Beyond the Wand", "author": "Tom Felton", "series": "", "spice": "", "tags": ["Funny", "Thought-provoking"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1026, "title": "Blood & Steel", "author": "Helen Scheuerer", "series": "", "spice": "", "tags": ["Adventurous"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1027, "title": "Blood Bonds", "author": "J. Bree", "series": "The Bonds That Tie #3", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1028, "title": "Blood of Hercules", "author": "Jasmine Mas", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1029, "title": "Breaking Dawn", "author": "Stephenie Meyer", "series": "The Twilight Saga #4", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780316067928"}, {"id": 1030, "title": "Bride", "author": "Ali Hazelwood", "series": "Bride #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780593638804"}, {"id": 1031, "title": "Brimstone", "author": "Callie Hart", "series": "Fae & Alchemy #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1032, "title": "Broken Bonds", "author": "J. Bree", "series": "The Bonds That Tie #1", "spice": "", "tags": ["Dark"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1033, "title": "Burn of the Everflame", "author": "Penn Cole", "series": "Kindred's Curse #4", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1034, "title": "Butcher & Blackbird", "author": "Brynne Weaver", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1035, "title": "Capitana", "author": "Cassandra James", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1036, "title": "Carnage: A Dark Revenge Romance", "author": "Shantel Tessier", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1037, "title": "Catching Fire", "author": "Suzanne Collins", "series": "The Hunger Games #2", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780439023498"}, {"id": 1038, "title": "Check & Mate", "author": "Ali Hazelwood", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1039, "title": "City of Gods and Monsters", "author": "Kayla Edwards", "series": "House of Devils #1", "spice": "Adventurous, Dark, Mysterious", "tags": ["Adventurous", "Dark", "Mysterious"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1040, "title": "Crescent City", "author": "Sarah J. Maas", "series": "Crescent City #1", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781635574043"}, {"id": 1041, "title": "Crossed", "author": "Emily McIntire", "series": "Never After #5", "spice": "Dark, Suspenseful", "tags": ["Dark", "Suspenseful"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1042, "title": "Crown of Midnight", "author": "Sarah J. Maas", "series": "Throne of Glass #2", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781619630628"}, {"id": 1043, "title": "Dark Fae", "author": "Caroline Peckham", "series": "Ruthless Boys of the Zodiac #1", "spice": "Adventurous, Dark, Mysterious", "tags": ["Adventurous", "Dark", "Mysterious"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1044, "title": "Daughter of No Worlds", "author": "Carissa Broadbent", "series": "The War of Lost Hearts #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1045, "title": "Daydream", "author": "Hannah Grace", "series": "Maple Hills #4", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1046, "title": "Deep End", "author": "Ali Hazelwood", "series": "Maple Hills #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1047, "title": "Destroy Me", "author": "Tahereh Mafi", "series": "", "spice": "", "tags": ["Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1048, "title": "Direbound", "author": "Sable Sorensen", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1049, "title": "Divine Rivals", "author": "Rebecca Ross", "series": "", "spice": "", "tags": ["Adventurous", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781250857439"}, {"id": 1050, "title": "Draco Malfoy and the Mortifying Ordeal of Being in Love", "author": "isthisselfcare", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1051, "title": "Eclipse", "author": "Stephenie Meyer", "series": "The Twilight Saga #3", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780316160216"}, {"id": 1052, "title": "Empire of Storms", "author": "Sarah J. Maas", "series": "Throne of Glass #5", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781619636071"}, {"id": 1053, "title": "Eragon", "author": "Christopher Paolini", "series": "The Inheritance Cycle #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1054, "title": "Face Off", "author": "Chelsea Curto", "series": "D.C. Stars #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1055, "title": "Fae Reckoning", "author": "Lucia Ashta", "series": "Royals of Embermere #5", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1056, "title": "Fall of Ruin and Wrath", "author": "Jennifer L. Armentout", "series": "", "spice": "", "tags": ["Adventurous", "Mysterious"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1057, "title": "Fate & Furies", "author": "Helen Scheuerer", "series": "The Legends of Thezmarr #3", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1058, "title": "Fate of the Sun King", "author": "Nisha J. Tuli", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1059, "title": "Fearless", "author": "Lauren Roberts", "series": "Powerless Trilogy #3", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1060, "title": "Fifty Shades of Grey", "author": "E.L. James", "series": "Fifty Shades #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1061, "title": "Flawless", "author": "Elsie Silver", "series": "", "spice": "", "tags": ["Feel-good", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1062, "title": "For Whom the Belle Tolls", "author": "Jaysea Lynn", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1063, "title": "Forced Bonds", "author": "J Bree", "series": "The Bonds That Tie #4", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1064, "title": "Fourth Wing", "author": "Rebecca Yarros", "series": "The Empyrean #1", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781649374042"}, {"id": 1065, "title": "Friends Lovers and the Big Terrible Thing", "author": "Matthew Perry", "series": "", "spice": "", "tags": ["Moving", "Thought-provoking"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1066, "title": "From Blood and Ash", "author": "Jennifer L. Armentout", "series": "Blood and Ash #1", "spice": "", "tags": ["Adventurous", "Dark"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781952457036"}, {"id": 1067, "title": "Glow of the Everflame", "author": "Penn Cole", "series": "Kindred's Curse #2", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1068, "title": "God Save the King", "author": "Alice Dolman", "series": "Royal Connections #2", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1069, "title": "Great Big Beautiful Life", "author": "Emily Henry", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1070, "title": "Harry Potter and the Chamber of Secrets", "author": "J.K. Rowling", "series": "Harry Potter #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780439064873"}, {"id": 1071, "title": "Harry Potter and the Cursed Child", "author": "J.K. Rowling", "series": "Harry Potter #8", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781338099133"}, {"id": 1072, "title": "Harry Potter and the Deathly Hallows", "author": "J.K. Rowling", "series": "Harry Potter #7", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780545010221"}, {"id": 1073, "title": "Harry Potter and the Goblet of Fire", "author": "J.K. Rowling", "series": "Harry Potter #4", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780439139601"}, {"id": 1074, "title": "Harry Potter and the Half-Blood Prince", "author": "J.K. Rowling", "series": "Harry Potter #6", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780439785969"}, {"id": 1075, "title": "Harry Potter and the Order of the Phoenix", "author": "J.K. Rowling", "series": "Harry Potter #5", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780439358071"}, {"id": 1076, "title": "Harry Potter and the Prisoner of Azkaban", "author": "J.K. Rowling", "series": "Harry Potter #3", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780439136365"}, {"id": 1077, "title": "Harry Potter and the Sorcerer's Stone", "author": "J.K. Rowling", "series": "Harry Potter #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780439708180"}, {"id": 1078, "title": "Haunting Adeline", "author": "H.D. Carlton", "series": "Cat and Mouse #1", "spice": "Extra Spicy \ud83e\udd75", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1079, "title": "Heartless", "author": "Elsie Silver", "series": "", "spice": "", "tags": ["Feel-good", "Funny", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1080, "title": "Heat of the Everflame", "author": "Penn Cole", "series": "Kindred's Curse #3", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1081, "title": "Heavenly Bodies", "author": "Imani Erriu", "series": "", "spice": "", "tags": ["Adventurous", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1082, "title": "Heir of Fire", "author": "Sarah J. Maas", "series": "Throne of Glass #3", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781619630659"}, {"id": 1083, "title": "Her Shadows His Secrets", "author": "C.C. Monroe", "series": "", "spice": "", "tags": ["Dark", "Mysterious", "Suspenseful"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1084, "title": "Hexed", "author": "Emily McIntire", "series": "Never After #6", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1085, "title": "Hooked", "author": "Emily McIntire", "series": "Never After #4", "spice": "", "tags": ["Dark"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1086, "title": "Hopeless", "author": "Elsie Silver", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1087, "title": "House of Blight", "author": "Maxym M. Martineau", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1088, "title": "House of Earth and Blood", "author": "Sarah J. Maas", "series": "", "spice": "", "tags": ["Adventurous", "Moving", "Mysterious"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781635574043"}, {"id": 1089, "title": "House of Flame and Shadow", "author": "Sarah J. Maas", "series": "Crescent City #3", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781635574111"}, {"id": 1090, "title": "House of Sky and Breath", "author": "Sarah J. Maas", "series": "Crescent City #2", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781635574067"}, {"id": 1091, "title": "How the King of Elfhame Learned to Hate Stories", "author": "Holly Black", "series": "The Folk of the Air #3.5", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780316540940"}, {"id": 1092, "title": "Icebreaker", "author": "Hannah Grace", "series": "Maple Hills #2", "spice": "", "tags": ["Feel-good", "Funny"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1093, "title": "If Love Had A Price", "author": "Ana Huang", "series": "If Love #3", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1094, "title": "If We Ever Meet Again", "author": "Ana Huang", "series": "If Love #1", "spice": "", "tags": ["Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1095, "title": "If We Were Perfect", "author": "Ana Huang", "series": "If Love #4", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1096, "title": "If the Sun Never Sets", "author": "Ana Huang", "series": "If Love #2", "spice": "", "tags": ["Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1097, "title": "In Your Dreams", "author": "Sarah Adams", "series": "When in Rome #4", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1098, "title": "In the Veins of the Drowning", "author": "Kalie Cassidy", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1099, "title": "Indigo Ridge", "author": "Devney Perry", "series": "The Edens #1", "spice": "Moving, Mysterious", "tags": ["Moving", "Mysterious"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1100, "title": "Inheritance", "author": "Katharine McGee", "series": "American Royals #0.5", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1101, "title": "Iron & Embers", "author": "Helen Scheuerer", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1102, "title": "Iron Flame", "author": "Rebecca Yarros", "series": "The Empyrean #2", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781649374172"}, {"id": 1103, "title": "King of Envy", "author": "Ana Huang", "series": "Kings of Sin #5", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781464247057"}, {"id": 1104, "title": "King of Gluttony", "author": "Ana Huang", "series": "Kings of Sin #6", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1105, "title": "King of Greed", "author": "Ana Huang", "series": "Kings of Sin #3", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781728295244"}, {"id": 1106, "title": "King of Lust", "author": "Ana Huang", "series": "Kings of Sin #7", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1107, "title": "King of Pride", "author": "Ana Huang", "series": "Kings of Sin #2", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781728295237"}, {"id": 1108, "title": "King of Sloth", "author": "Ana Huang", "series": "Kings of Sin #4", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781464224591"}, {"id": 1109, "title": "King of Wrath", "author": "Ana Huang", "series": "Kings of Sin #1", "spice": "", "tags": ["Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781728295213"}, {"id": 1110, "title": "Kingdom of Ash", "author": "Sarah J. Maas", "series": "Throne of Glass #7", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781681195773"}, {"id": 1111, "title": "Kings of Quarantine", "author": "Caroline Peckham & Susanne Valenti", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1112, "title": "Kiss of the Basilisk", "author": "Lindsay Straube", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1113, "title": "Lightlark", "author": "Alex Aster", "series": "", "spice": "", "tags": ["Adventurous", "Mysterious"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1114, "title": "Love Theoretically", "author": "Ali Hazelwood", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1115, "title": "Majesty", "author": "Katharine McGee", "series": "American Royals #2", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781984830173"}, {"id": 1116, "title": "Mate", "author": "Ali Hazelwood", "series": "Bride #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1117, "title": "Metal Slinger", "author": "Rachel Schneider", "series": "Fire & Metal #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1118, "title": "Midnight Sun", "author": "Stephenie Meyer", "series": "The Twilight Saga #5", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780316707046"}, {"id": 1119, "title": "Mockingjay", "author": "Suzanne Collins", "series": "The Hunger Games #3", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780439023511"}, {"id": 1120, "title": "Never Keep", "author": "Caroline Peckham", "series": "Sins of the Zodiac #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1121, "title": "New Moon", "author": "Stephenie Meyer", "series": "The Twilight Saga #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780316160209"}, {"id": 1122, "title": "Nocticadia", "author": "Keri Lake", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1123, "title": "One Dark Window", "author": "Rachel Gillig", "series": "The Shepherd King #1", "spice": "", "tags": ["Adventurous", "Dark", "Mysterious"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1124, "title": "One Italian Summer", "author": "Rebecca Serle", "series": "", "spice": "", "tags": ["Moving", "Thought-provoking"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1125, "title": "Onyx Storm", "author": "Rebecca Yarros", "series": "The Empyrean #3", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781649374809"}, {"id": 1126, "title": "People We Meet on Vacation", "author": "Emily Henry", "series": "Beach Read Universe", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1127, "title": "Phantasma", "author": "Kaylie Smith", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1128, "title": "Powerful", "author": "Lauren Roberts", "series": "Powerless Trilogy #0.5", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1129, "title": "Powerless", "author": "Lauren Roberts", "series": "Powerless Trilogy #1", "spice": "", "tags": ["Adventurous", "Moving", "Suspenseful"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781668047064"}, {"id": 1130, "title": "Practice Makes Perfect", "author": "Sarah Adams", "series": "When in Rome #2", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1131, "title": "Prince of Deception", "author": "Jenny Hickman", "series": "Myths of Airren #2.5", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1132, "title": "Prince of Seduction", "author": "Jenny Hickman", "series": "Myths of Airren #1.5", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1133, "title": "Promised in Fire", "author": "Jasmine Walt", "series": "Of Dragons and Fae #1", "spice": "Adventurous", "tags": ["Adventurous"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1134, "title": "Psycho Shifters", "author": "Jasmine Mas", "series": "Cruel Shifterverse #1", "spice": "Adventurous", "tags": ["Adventurous"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1135, "title": "Queen of Shadows", "author": "Sarah J. Maas", "series": "Throne of Glass #4", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781619636040"}, {"id": 1136, "title": "Queen of the Lost Boys", "author": "T.S. Kinley", "series": "The Neverland Chronicles #3", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1137, "title": "Quicksilver", "author": "Callie Hart", "series": "Fae & Alchemy #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1138, "title": "Rain of Shadows and Endings", "author": "Melissa K. Roehrich", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1139, "title": "Reckless", "author": "Elsie Silver", "series": "Powerless Trilogy #2", "spice": "", "tags": ["Feel-good", "Funny", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1140, "title": "Red White & Royal Blue", "author": "Casey McQuiston", "series": "", "spice": "", "tags": ["Feel-good", "Funny", "Inspirational"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781250316776"}, {"id": 1141, "title": "Reign", "author": "Katharine McGee", "series": "American Royals #4", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780593624777"}, {"id": 1142, "title": "Rivals", "author": "Katharine McGee", "series": "American Royals #3", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780593624760"}, {"id": 1143, "title": "Royal Heirs Academy", "author": "Lindsey Duga", "series": "Royal Heirs Academy #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1144, "title": "Ruin", "author": "Gillian Eliza West", "series": "The Infernis Duology #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1145, "title": "Rule of the Aurora King", "author": "Nisha J. Tuli", "series": "Artefacts of Ouranos #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1146, "title": "Ruthless Fae", "author": "Caroline Peckham", "series": "Zodiac Academy #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1147, "title": "Ruthless Vows", "author": "Rebecca Ross", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781250857453"}, {"id": 1148, "title": "Savage Bonds", "author": "J. Bree", "series": "The Bonds That Tie #2", "spice": "", "tags": ["Adventurous", "Dark"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1149, "title": "Scarred", "author": "Emily McIntire", "series": "Never After #1", "spice": "", "tags": ["Dark"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1150, "title": "Second to the Right", "author": "T.S. Kinley", "series": "The Neverland Chronicles", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1151, "title": "Shadow & Storms", "author": "Helen Scheuerer", "series": "The Legends of Thezmarr #4", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1152, "title": "Shadows so Cruel", "author": "Liv Zander", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1153, "title": "Shadows so Cruel: A Dark Fantasy Romance", "author": "Liv Zander", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1154, "title": "Shatter Me", "author": "Mafi Tahereh", "series": "Shatter Me #1", "spice": "", "tags": ["Adventurous"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1155, "title": "Shield of Sparrows", "author": "Devney Perry", "series": "Shield of Sparrows #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1156, "title": "Silver Elite", "author": "Dani Francis", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1157, "title": "Six Scorched Roses", "author": "Carissa Broadbent", "series": "Crowns of Nyaxia #1.5", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781035022564"}, {"id": 1158, "title": "Slaying the Vampire Conqueror", "author": "Carissa Broadbent", "series": "Crowns of Nyaxia #2.5", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781035030873"}, {"id": 1159, "title": "Spare", "author": "Prince Harry", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1160, "title": "Spark of the Everflame", "author": "Penn Cole", "series": "Kindred's Curse #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1161, "title": "Straight on till Morning", "author": "T.S. Kinley", "series": "The Neverland Chronicles #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1162, "title": "Struck", "author": "Jennifer Bosworth", "series": "", "spice": "", "tags": ["Adventurous", "Challenging", "Dark"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1163, "title": "Sunrise on the Reaping", "author": "Suzanne Collins", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1164, "title": "Tale of the Heart Queen", "author": "Nisha J. Tuli", "series": "Artefacts of Ouranos #4", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1165, "title": "Talking as Fast as I Can", "author": "Lauren Graham", "series": "", "spice": "", "tags": ["Feel-good", "Funny"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1166, "title": "Terms and Conditions", "author": "Lauren Asher", "series": "", "spice": "", "tags": ["Feel-good", "Funny", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1167, "title": "Tethered", "author": "Elayna R. Gallea", "series": "The Binding Chronicles #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1168, "title": "The Agreement", "author": "L. Steele", "series": "Morally Grey Billionaires #3", "spice": "", "tags": ["Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1169, "title": "The Ashes and the Star-Cursed King", "author": "Carissa Broadbent", "series": "Crowns of Nyaxia #2", "spice": "", "tags": ["Adventurous", "Dark", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781035016846"}, {"id": 1170, "title": "The Assassin's Blade", "author": "Sarah J. Maas", "series": "Throne of Glass #0.1-0.5", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781619633612"}, {"id": 1171, "title": "The Awakening", "author": "Caroline Peckham", "series": "Zodiac Academy #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1172, "title": "The Ballad of Falling Dragons", "author": "Sarah A. Parker", "series": "Moonfall #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1173, "title": "The Ballad of Songbirds and Snakes", "author": "Suzanne Collins", "series": "The Hunger Games #0", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781338635171"}, {"id": 1174, "title": "The Blackened Blade", "author": "Isla Davon", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1175, "title": "The Book of Azrael", "author": "Amber V. Nicole", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1176, "title": "The Christmas One Night Stand", "author": "L. Steele", "series": "Morally Grey Billionaires #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1177, "title": "The Christmas Tree Farm", "author": "Laurie Gilmore", "series": "Dream Harbor #3", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1178, "title": "The Cinnamon Bun Book Store", "author": "Laurie Gilmore", "series": "Dream Harbor #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1179, "title": "The Ever King", "author": "L.J. Andrews", "series": "", "spice": "", "tags": ["Adventurous", "Dark", "Mysterious"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1180, "title": "The Fallen & the Kiss of Dusk", "author": "Carissa Broadbent", "series": "Crowns of Nyaxia #4", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1181, "title": "The Fine Print", "author": "Lauren Asher", "series": "", "spice": "", "tags": ["Feel-good", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1182, "title": "The Gingerbread Bakery", "author": "Laurie Gilmore", "series": "Dream Harbor #5", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1183, "title": "The Great Gatsby", "author": "F. Scott Fitzgerald", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1184, "title": "The Heir Affair", "author": "Heather Cooks & Jessica Morgan", "series": "", "spice": "", "tags": ["Feel-good", "Funny", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1185, "title": "The Hunger Games", "author": "Suzanne Collins", "series": "The Hunger Games #1", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780439023481"}, {"id": 1186, "title": "The Ice Kiss", "author": "L. Steele", "series": "Morally Grey Billionaires #6", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1187, "title": "The Kiss Quotient", "author": "Helen Hoang", "series": "", "spice": "", "tags": ["Feel-good"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1188, "title": "The Lies of Lena", "author": "Kylie Snow", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1189, "title": "The Lion the Witch and the Wardrobe", "author": "C.S. Lewis", "series": "Chronicles of Narnia #2", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1190, "title": "The Lost Sisters", "author": "Holly Black", "series": "The Folk of the Air #1.5", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1191, "title": "The Other Prince", "author": "Alice Dolman", "series": "Royal Connections #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1192, "title": "The Pretend Christmas Bride", "author": "L. Steele", "series": "Morally Grey Billionaires #7", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1193, "title": "The Proposal", "author": "L. Steele", "series": "Morally Grey Billionaires #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1194, "title": "The Pumpkin Spice Caf\u00e9", "author": "Laurie Gilmore", "series": "Dream Harbor #1", "spice": "", "tags": ["Feel-good", "Funny"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1195, "title": "The Queen of Nothing", "author": "Holly Black", "series": "The Folk of the Air #3", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780316310406"}, {"id": 1196, "title": "The Rebound", "author": "L. Steele", "series": "Morally Grey Billionaires #4", "spice": "", "tags": ["Funny", "Moving", "Suspenseful"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1197, "title": "The Road of Bones", "author": "Demi Winters", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1198, "title": "The Royal We", "author": "Heather Cooks & Jessica Morgan", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1199, "title": "The Serpent and the Wings of Night", "author": "Carissa Broadbent", "series": "Crowns of Nyaxia #1", "spice": "", "tags": ["Adventurous", "Dark", "Suspenseful"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781035003969"}, {"id": 1200, "title": "The Seven Husbands of Evelyn Hugo", "author": "Taylor Jenkins Reid", "series": "", "spice": "", "tags": ["Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781501161933"}, {"id": 1201, "title": "The Songbird & the Heart of Stone", "author": "Carissa Broadbent", "series": "Crowns of Nyaxia #3", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781035050062"}, {"id": 1202, "title": "The Starlight Heir", "author": "Amalie Howard", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1203, "title": "The Strawberry Patch Pancake House", "author": "Laurie Gilmore", "series": "Dream Harbor #4", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1204, "title": "The Third Gilmore Girl", "author": "Amy Sherman-Palladino & Kelly Bishop", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1205, "title": "The Wicked King", "author": "Holly Black", "series": "The Folk of the Air #2", "spice": "No Spice \ud83d\udc96", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9780316310314"}, {"id": 1206, "title": "The Wrong Wife", "author": "L. Steele", "series": "Morally Grey Billionaires #5", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1207, "title": "Throne of Glass", "author": "Sarah J. Maas", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781599906959"}, {"id": 1208, "title": "Throne of the Fallen", "author": "Kerri Maniscalco", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1209, "title": "Timeborne", "author": "SARA SAMUELS", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1210, "title": "Tower of Dawn", "author": "Sarah J. Maas", "series": "Throne of Glass #6", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781681195285"}, {"id": 1211, "title": "Tragic Bonds", "author": "J. Bree", "series": "The Bonds That Tie #5", "spice": "", "tags": ["Adventurous", "Dark", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1212, "title": "Trial of the Sun Queen", "author": "Nisha J. Tuli", "series": "Artefacts of Ouranos #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1213, "title": "Twisted", "author": "Emily McIntire", "series": "Never After #2", "spice": "", "tags": ["Dark"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1214, "title": "Twisted Games", "author": "Ana Huang", "series": "Twisted #2", "spice": "", "tags": ["Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781728266435"}, {"id": 1215, "title": "Twisted Hate", "author": "Ana Huang", "series": "Twisted #3", "spice": "", "tags": ["Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781728282152"}, {"id": 1216, "title": "Twisted Lies", "author": "Ana Huang", "series": "Twisted #4", "spice": "", "tags": ["Dark", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781728295190"}, {"id": 1217, "title": "Twisted Love", "author": "Ana Huang", "series": "Twisted #1", "spice": "", "tags": ["Dark", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781728252650"}, {"id": 1218, "title": "Two", "author": "Gina L. Maxwell & Kristin Cast", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1219, "title": "Two Twisted Crowns", "author": "Rachel Gillig", "series": "The Shepherd King #2", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1220, "title": "Unbroken Bonds", "author": "J. Bree", "series": "The Bonds That Tie #6", "spice": "", "tags": ["Adventurous", "Dark", "Moving"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1221, "title": "Vows & Ruins", "author": "Helen Scheuerer", "series": "The Legends of Thezmarr #2", "spice": "Spicy \ud83d\udd25", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1222, "title": "When in Rome", "author": "Sarah Adams", "series": "When in Rome #1", "spice": "Some Spice \ud83c\udf36\ufe0f", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1223, "title": "When the Moon Hatched", "author": "Sarah A. Parker", "series": "Moonfall #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0, "isbn": "9781464233708"}, {"id": 1224, "title": "Wicked is the Reaper", "author": "Nisha J Tuli", "series": "Artefacts of Ouranos #0.5", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1225, "title": "Wildfire", "author": "Hannah Grace", "series": "Maple Hills #3", "spice": "", "tags": ["Feel-good", "Funny"], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1226, "title": "Wings of Ink", "author": "Angelina J. Steffort", "series": "", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1227, "title": "Wish", "author": "Sara Flanagan", "series": "Onyx Mist #1", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}, {"id": 1228, "title": "Wretched", "author": "Emily McIntire", "series": "Never After #3", "spice": "", "tags": [], "read": false, "currentlyReading": false, "rating": 0, "notes": "", "dateRead": "", "rereadCount": 0}];
        let seriesViewActive = false;
        let editingBookId = null;
        
        console.log('‚úÖ Loaded ' + library.length + ' books');
        
        async function saveLibrary() {
            // Save to localStorage as backup
            localStorage.setItem('bookLibrary', JSON.stringify(library));
            
            // Save to Firebase
            if (window.firebaseDB) {
                try {
                    const { doc, setDoc } = await import("https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js");
                    await setDoc(doc(window.firebaseDB, "userData", "library"), {
                        books: library,
                        lastUpdated: new Date().toISOString()
                    });
                    console.log('‚úÖ Synced to Firebase');
                } catch (error) {
                    console.error('Firebase save error:', error);
                }
            }
        }
        
        function getFilteredAndSortedBooks() {
            let books = library;
            
            const searchQuery = document.getElementById('search-box').value.toLowerCase();
            if (searchQuery) {
                books = books.filter(book => 
                    book.title.toLowerCase().includes(searchQuery) ||
                    book.author.toLowerCase().includes(searchQuery) ||
                    (book.series && book.series.toLowerCase().includes(searchQuery))
                );
            }
            
            const filter = document.getElementById('filter-select').value;
            if (filter === 'read') {
                books = books.filter(b => b.read);
            } else if (filter === 'unread') {
                books = books.filter(b => !b.read && !b.currentlyReading);
            } else if (filter === 'reading') {
                books = books.filter(b => b.currentlyReading);
            }
            
            const sort = document.getElementById('sort-select').value;
            if (sort === 'title') {
                books.sort((a, b) => a.title.localeCompare(b.title));
            } else if (sort === 'author') {
                books.sort((a, b) => a.author.localeCompare(b.author));
            } else if (sort === 'rating') {
                books.sort((a, b) => b.rating - a.rating);
            }
            
            return books;
        }
        
        function formatDate(dateStr) {
            if (!dateStr) return '';
            const date = new Date(dateStr + 'T00:00:00');
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            return months[date.getMonth()] + ' ' + date.getDate() + ', ' + date.getFullYear();
        }
        
        function displayBooks() {
            // If series view is active, use that instead
            if (seriesViewActive) {
                displaySeriesView();
                return;
            }
            
            const books = getFilteredAndSortedBooks();
            const grid = document.getElementById('books-grid');
            const noResults = document.getElementById('no-results');
            
            if (books.length === 0) {
                grid.innerHTML = '';
                noResults.style.display = 'block';
                return;
            }
            
            noResults.style.display = 'none';
            grid.innerHTML = books.map(book => {
                let extraInfo = '';
                if (book.dateStarted && book.dateRead) {
                    extraInfo += 'üìÖ ' + formatDate(book.dateStarted) + ' ‚Üí ' + formatDate(book.dateRead) + ' ';
                } else if (book.dateRead) {
                    extraInfo += 'üìÖ Finished: ' + formatDate(book.dateRead) + ' ';
                } else if (book.dateStarted) {
                    extraInfo += 'üìÖ Started: ' + formatDate(book.dateStarted) + ' ';
                }
                if (book.rereadCount > 0) extraInfo += 'üîÑ ' + book.rereadCount + 'x ';
                if (book.tags && book.tags.length > 0) extraInfo += 'üè∑Ô∏è ' + book.tags.join(', ');
                
                return '<div class="book-card">' +
                    '<div class="book-content">' +
                    '<div class="book-title">' + book.title + '</div>' +
                    '<div class="book-author">' + book.author + '</div>' +
                    (book.series ? '<div class="book-series">' + book.series + '</div>' : '') +
                    (book.spice ? '<div class="book-spice">' + book.spice + '</div>' : '') +
                    '<div class="book-status">' +
                    '<label><input type="checkbox" onchange="toggleRead(' + book.id + ')" ' + (book.read ? 'checked' : '') + '> Read</label>' +
                    '<label><input type="checkbox" onchange="toggleCurrentlyReading(' + book.id + ')" ' + (book.currentlyReading ? 'checked' : '') + '> Reading</label>' +
                    '</div>' +
                    (book.read ? '<div class="book-rating">' +
                    [1,2,3,4,5].map(star => 
                        '<span class="star ' + (star <= book.rating ? 'filled' : '') + '" onclick="setRating(' + book.id + ', ' + star + ')">‚òÖ</span>'
                    ).join('') +
                    '</div>' : '') +
                    (extraInfo ? '<div class="book-extra-info">' + extraInfo + '</div>' : '') +
                    (book.notes ? '<div class="book-extra-info">üí≠ ' + book.notes.substring(0, 50) + (book.notes.length > 50 ? '...' : '') + '</div>' : '') +
                    '<button class="edit-btn" onclick="openEditModal(' + book.id + ')">‚úèÔ∏è Edit Details</button>' +
                    '</div>' +
                    // Custom cover takes priority, then ISBN cover, then placeholder
                    (book.customCover ? 
                        '<div class="book-cover-container-right">' +
                        '<img class="book-cover-img" src="' + book.customCover + '" style="display: block;">' +
                        '</div>'
                        : (book.isbn ? 
                            '<div class="book-cover-container-right">' +
                            '<img class="book-cover-img" src="https://covers.openlibrary.org/b/isbn/' + book.isbn + '-L.jpg" ' +
                            'onload="this.style.display=\'block\'; this.nextElementSibling.style.display=\'none\'" ' +
                            'onerror="this.style.display=\'none\'; this.nextElementSibling.style.display=\'flex\'">' +
                            '<div class="book-cover-placeholder-right">' + book.title.substring(0,1) + '</div>' +
                            '</div>'
                            : '<div class="book-cover-container-right"><div class="book-cover-placeholder-right">' + book.title.substring(0,1) + '</div></div>')) +
                    '</div>';
            }).join('');
        }
        
        function toggleRead(bookId) {
            const book = library.find(b => b.id === bookId);
            if (book) {
                book.read = !book.read;
                if (book.read) {
                    book.currentlyReading = false;
                    // Auto-set finish date to today if not already set
                    if (!book.dateRead) {
                        const today = new Date();
                        book.dateRead = today.toISOString().split('T')[0];
                    }
                    // Auto-set start date if not set (assume started today)
                    if (!book.dateStarted) {
                        const today = new Date();
                        book.dateStarted = today.toISOString().split('T')[0];
                    }
                }
                saveLibrary();
                updateStats();
                displayBooks();
            }
        }
        
        function toggleCurrentlyReading(bookId) {
            const book = library.find(b => b.id === bookId);
            if (book) {
                book.currentlyReading = !book.currentlyReading;
                if (book.currentlyReading) {
                    book.read = false;
                    // Auto-set start date to today if not already set
                    if (!book.dateStarted) {
                        const today = new Date();
                        book.dateStarted = today.toISOString().split('T')[0];
                    }
                }
                saveLibrary();
                updateStats();
                displayBooks();
            }
        }
        
        function setRating(bookId, rating) {
            const book = library.find(b => b.id === bookId);
            if (book) {
                book.rating = rating;
                saveLibrary();
                updateStats();
                displayBooks();
            }
        }
        
        function openEditModal(bookId) {
            editingBookId = bookId;
            const book = library.find(b => b.id === bookId);
            
            document.getElementById('edit-title').value = book.title || '';
            document.getElementById('edit-author').value = book.author || '';
            document.getElementById('edit-series').value = book.series || '';
            document.getElementById('edit-isbn').value = book.isbn || '';
            document.getElementById('edit-spice').value = book.spice || '';
            document.getElementById('edit-notes').value = book.notes || '';
            document.getElementById('edit-date-start').value = book.dateStarted || '';
            document.getElementById('edit-date').value = book.dateRead || '';
            document.getElementById('edit-reread').value = book.rereadCount || 0;
            document.getElementById('edit-tags').value = (book.tags || []).join(', ');
            
            // Clear ISBN search results
            document.getElementById('isbn-results').innerHTML = '';
            
            // Clear and setup custom cover upload
            document.getElementById('edit-cover-upload').value = '';
            const coverPreview = document.getElementById('cover-preview');
            if (book.customCover) {
                coverPreview.innerHTML = '<div style="text-align: center;"><img src="' + book.customCover + '" style="max-width: 150px; max-height: 200px; border-radius: 8px; border: 2px solid #66cccc;"><div style="color: #4ade80; margin-top: 5px; font-size: 0.9em;">‚úÖ Custom cover set</div></div>';
            } else {
                coverPreview.innerHTML = '';
            }
            
            // Setup file upload handler
            document.getElementById('edit-cover-upload').onchange = handleCoverUpload;
            
            document.getElementById('edit-modal').style.display = 'block';
        }
        
        function handleCoverUpload(event) {
            const file = event.target.files[0];
            if (file) {
                if (!file.type.startsWith('image/')) {
                    alert('Please select an image file');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const coverPreview = document.getElementById('cover-preview');
                    coverPreview.innerHTML = '<div style="text-align: center;"><img src="' + e.target.result + '" style="max-width: 150px; max-height: 200px; border-radius: 8px; border: 2px solid #66cccc;"><div style="color: #4ade80; margin-top: 5px; font-size: 0.9em;">‚úÖ New cover ready (save to apply)</div></div>';
                };
                reader.readAsDataURL(file);
            }
        }
        
        function clearCustomCover() {
            document.getElementById('edit-cover-upload').value = '';
            document.getElementById('cover-preview').innerHTML = '<div style="color: #fbbf24; padding: 10px; background: rgba(251, 191, 36, 0.1); border-radius: 6px;">Custom cover will be removed when you save</div>';
        }
        
        function closeModal() {
            document.getElementById('edit-modal').style.display = 'none';
            editingBookId = null;
        }
        
        function saveEdit() {
            const book = library.find(b => b.id === editingBookId);
            if (book) {
                book.title = document.getElementById('edit-title').value;
                book.author = document.getElementById('edit-author').value;
                book.series = document.getElementById('edit-series').value;
                book.isbn = document.getElementById('edit-isbn').value;
                book.spice = document.getElementById('edit-spice').value;
                book.notes = document.getElementById('edit-notes').value;
                book.dateStarted = document.getElementById('edit-date-start').value;
                book.dateRead = document.getElementById('edit-date').value;
                book.rereadCount = parseInt(document.getElementById('edit-reread').value) || 0;
                
                const tagsInput = document.getElementById('edit-tags').value;
                book.tags = tagsInput ? tagsInput.split(',').map(t => t.trim()).filter(t => t) : [];
                
                // Handle custom cover
                const coverUpload = document.getElementById('edit-cover-upload');
                const coverPreview = document.getElementById('cover-preview');
                
                if (coverUpload.files && coverUpload.files[0]) {
                    // New cover uploaded
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        book.customCover = e.target.result;
                        saveLibrary();
                        displayBooks();
                        closeModal();
                        console.log('‚úÖ Updated book with custom cover:', book.title);
                    };
                    reader.readAsDataURL(coverUpload.files[0]);
                    return; // Wait for async read
                } else if (coverPreview.innerHTML.includes('will be removed')) {
                    // User clicked clear
                    delete book.customCover;
                }
                
                saveLibrary();
                displayBooks();
                closeModal();
                console.log('‚úÖ Updated book:', book.title);
            }
        }
        
        function calculateStreak() {
            // Get reading log from localStorage
            const readingLog = JSON.parse(localStorage.getItem('readingLog') || '[]');
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // Calculate streak from today backwards
            let streak = 0;
            let checkDate = new Date(today);
            
            while (true) {
                const dateStr = checkDate.toISOString().split('T')[0];
                if (readingLog.includes(dateStr)) {
                    streak++;
                    checkDate.setDate(checkDate.getDate() - 1);
                } else {
                    break;
                }
            }
            
            document.getElementById('reading-streak').textContent = streak;
            
            // Update card state
            const todayStr = today.toISOString().split('T')[0];
            const streakCard = document.getElementById('streak-card');
            const hintText = streakCard.querySelector('.streak-hint');
            
            if (readingLog.includes(todayStr)) {
                streakCard.classList.add('logged-today');
                streakCard.style.border = '3px solid #fbbf24';
                streakCard.style.boxShadow = '0 0 20px rgba(251, 191, 36, 0.8)';
                streakCard.style.background = 'rgba(251, 191, 36, 0.15)';
                hintText.textContent = '‚úì Logged for today!';
                console.log('Added logged-today styling');
            } else {
                streakCard.classList.remove('logged-today');
                streakCard.style.border = '';
                streakCard.style.boxShadow = '';
                streakCard.style.background = '';
                hintText.textContent = 'Click to log today!';
            }
        }
        
        function logTodaysReading() {
            const readingLog = JSON.parse(localStorage.getItem('readingLog') || '[]');
            const today = new Date();
            const todayStr = today.toISOString().split('T')[0];
            
            if (!readingLog.includes(todayStr)) {
                readingLog.push(todayStr);
                saveReadingLog(readingLog);
                calculateStreak();
                console.log('‚úÖ Logged reading for today!');
            }
        }
        
        async function saveReadingLog(readingLog) {
            // Save to localStorage as backup
            localStorage.setItem('readingLog', JSON.stringify(readingLog));
            
            // Save to Firebase
            if (window.firebaseDB) {
                try {
                    const { doc, setDoc } = await import("https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js");
                    await setDoc(doc(window.firebaseDB, "userData", "readingLog"), {
                        dates: readingLog,
                        lastUpdated: new Date().toISOString()
                    });
                    console.log('‚úÖ Reading log synced to Firebase');
                } catch (error) {
                    console.error('Firebase reading log save error:', error);
                }
            }
        }
        
        function toggleDayLog(dateStr) {
            const readingLog = JSON.parse(localStorage.getItem('readingLog') || '[]');
            const index = readingLog.indexOf(dateStr);
            
            if (index > -1) {
                readingLog.splice(index, 1);
                console.log('‚ùå Removed reading log for ' + dateStr);
            } else {
                readingLog.push(dateStr);
                console.log('‚úÖ Added reading log for ' + dateStr);
            }
            
            saveReadingLog(readingLog);
            renderCalendar();
            calculateStreak();
            updateCalendarStreak();
        }
        
        function updateStats() {
            document.getElementById('total-books').textContent = library.length;
            document.getElementById('books-read').textContent = library.filter(b => b.read).length;
            
            // Currently reading
            const currentlyReading = library.filter(b => b.currentlyReading);
            const crElement = document.getElementById('currently-reading-title');
            if (currentlyReading.length === 0) {
                crElement.textContent = '-';
                crElement.classList.remove('book-title');
            } else if (currentlyReading.length === 1) {
                crElement.textContent = currentlyReading[0].title;
                crElement.classList.add('book-title');
            } else {
                crElement.textContent = currentlyReading.length + ' books';
                crElement.classList.remove('book-title');
            }
            
            const ratedBooks = library.filter(b => b.rating > 0);
            const avgRating = ratedBooks.length > 0 
                ? (ratedBooks.reduce((sum, b) => sum + b.rating, 0) / ratedBooks.length).toFixed(1)
                : '-';
            document.getElementById('avg-rating').textContent = avgRating;
            
            calculateStreak();
        }
        
        // Initialize
        updateStats();
        displayBooks();
        
        // Event listeners
        document.getElementById('search-box').addEventListener('input', displayBooks);
        document.getElementById('sort-select').addEventListener('change', displayBooks);
        document.getElementById('filter-select').addEventListener('change', displayBooks);
        
        
        function pickRandomBook() {
            // Filter for unread books that are either:
            // 1. Standalone (no series)
            // 2. First book in series (#1, #0.5, or no number after checking later books are unread)
            const unreadBooks = library.filter(b => {
                if (b.read || b.currentlyReading) return false;
                
                // If no series, it's a standalone - include it
                if (!b.series) return true;
                
                // Check if this is book #1 or #0.5 (prequel)
                if (b.series.includes('#1') || b.series.includes('#0.5') || b.series.includes('#0.1')) {
                    return true;
                }
                
                // If series has a number but not #1, check if #1 exists and is read
                const seriesName = b.series.split('#')[0].trim();
                const book1 = library.find(book => 
                    book.series && 
                    book.series.startsWith(seriesName) && 
                    (book.series.includes('#1') || book.series.includes('#0'))
                );
                
                // Only include if book #1 doesn't exist OR if #1 is already read
                return !book1 || book1.read;
            });
            
            if (unreadBooks.length === 0) {
                document.getElementById('random-result').innerHTML = 
                    '<h2>üìö No First Books Left!</h2>' +
                    '<p style="font-size: 1.2em; margin-top: 20px;">You\'ve read all standalone books and first books in series!<br><br>Time to continue some series you started! üòä</p>';
                document.getElementById('random-modal').style.display = 'block';
                return;
            }
            
            const randomBook = unreadBooks[Math.floor(Math.random() * unreadBooks.length)];
            
            document.getElementById('random-result').innerHTML = 
                '<h2>üé≤ Your Random Pick!</h2>' +
                '<div style="margin-top: 30px;">' +
                '<div style="font-size: 1.8em; color: #66cccc; font-weight: bold; margin-bottom: 15px;">' + randomBook.title + '</div>' +
                '<div style="font-size: 1.3em; color: #a3d5d3; margin-bottom: 10px;">by ' + randomBook.author + '</div>' +
                (randomBook.series ? '<div style="font-size: 1.1em; color: #7eb8b8; font-style: italic; margin-bottom: 10px;">' + randomBook.series + '</div>' : '') +
                (randomBook.spice ? '<div style="margin-top: 15px; font-size: 1.1em;">' + randomBook.spice + '</div>' : '') +
                '</div>';
            
            document.getElementById('random-modal').style.display = 'block';
        }
        
        function closeRandomModal() {
            document.getElementById('random-modal').style.display = 'none';
        }
        
        function deleteBook() {
            console.log('üóëÔ∏è Delete button clicked! Editing book ID:', editingBookId);
            
            const book = library.find(b => b.id === editingBookId);
            if (!book) {
                console.error('Book not found!');
                alert('Error: Book not found!');
                return;
            }
            
            // Show custom confirmation modal
            document.getElementById('delete-book-name').textContent = '"' + book.title + '" by ' + book.author;
            document.getElementById('delete-confirm-modal').style.display = 'block';
        }
        
        function confirmDeleteBook() {
            console.log('User confirmed delete');
            
            try {
                const index = library.findIndex(b => b.id === editingBookId);
                console.log('Book index:', index);
                
                if (index > -1) {
                    const deletedTitle = library[index].title;
                    library.splice(index, 1);
                    console.log('Book removed from library. New count:', library.length);
                    
                    saveLibrary();
                    updateStats();
                    displayBooks();
                    
                    // Close both modals
                    document.getElementById('delete-confirm-modal').style.display = 'none';
                    closeModal();
                    
                    console.log('‚úÖ Delete complete!');
                } else {
                    console.error('Could not find book index');
                }
            } catch (error) {
                console.error('Error in confirmDeleteBook:', error);
                alert('Error deleting book: ' + error.message);
            }
        }
        
        function cancelDeleteBook() {
            console.log('Delete cancelled by user');
            document.getElementById('delete-confirm-modal').style.display = 'none';
        }
        
        
        function openAddModal() {
            // Clear all fields
            document.getElementById('add-title').value = '';
            document.getElementById('add-author').value = '';
            document.getElementById('add-series').value = '';
            document.getElementById('add-isbn').value = '';
            document.getElementById('add-spice').value = '';
            document.getElementById('add-tags').value = '';
            document.getElementById('add-isbn-results').innerHTML = '';
            
            document.getElementById('add-modal').style.display = 'block';
            
            // Setup autocomplete
            const titleInput = document.getElementById('add-title');
            const suggestionsDiv = document.getElementById('title-suggestions');
            
            titleInput.addEventListener('input', function() {
                const query = this.value.toLowerCase().trim();
                
                if (query.length < 2) {
                    suggestionsDiv.style.display = 'none';
                    return;
                }
                
                // Find matching books
                const matches = library.filter(book => 
                    book.title.toLowerCase().includes(query) ||
                    book.author.toLowerCase().includes(query)
                ).slice(0, 5);
                
                if (matches.length === 0) {
                    suggestionsDiv.style.display = 'none';
                    return;
                }
                
                // Show suggestions
                suggestionsDiv.innerHTML = matches.map(book => 
                    '<div class="autocomplete-suggestion duplicate">' +
                    '<div class="suggestion-title">' + book.title + 
                    '<span class="suggestion-badge">Already in library</span></div>' +
                    '<div class="suggestion-author">' + book.author + '</div>' +
                    '</div>'
                ).join('');
                
                suggestionsDiv.style.display = 'block';
            });
            
            // Hide suggestions when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.autocomplete-container')) {
                    suggestionsDiv.style.display = 'none';
                }
            });
        }
        
        function closeAddModal() {
            document.getElementById('add-modal').style.display = 'none';
        }
        
        function addNewBook() {
            const title = document.getElementById('add-title').value.trim();
            const author = document.getElementById('add-author').value.trim();
            
            if (!title || !author) {
                alert('Title and Author are required!');
                return;
            }
            
            // Check for duplicates
            const duplicate = library.find(b => 
                b.title.toLowerCase() === title.toLowerCase() && 
                b.author.toLowerCase() === author.toLowerCase()
            );
            
            if (duplicate) {
                alert('This book already exists in your library!\n\n"' + duplicate.title + '" by ' + duplicate.author);
                return;
            }
            
            // Find the highest ID and add 1
            const maxId = Math.max(...library.map(b => b.id));
            
            const newBook = {
                id: maxId + 1,
                title: title,
                author: author,
                series: document.getElementById('add-series').value.trim(),
                isbn: document.getElementById('add-isbn').value.trim(),
                spice: document.getElementById('add-spice').value,
                tags: document.getElementById('add-tags').value.split(',').map(t => t.trim()).filter(t => t),
                read: false,
                currentlyReading: false,
                rating: 0,
                notes: "",
                dateRead: "",
                rereadCount: 0
            };
            
            library.push(newBook);
            saveLibrary();
            updateStats();
            displayBooks();
            closeAddModal();
            
            console.log('‚úÖ Added new book:', newBook.title);
            alert('Book added: ' + newBook.title);
        }
        
        
        function toggleSeriesView() {
            seriesViewActive = !seriesViewActive;
            const btn = document.querySelector('.series-btn');
            
            if (seriesViewActive) {
                btn.classList.add('active');
                btn.textContent = 'üìã List View';
                displaySeriesView();
            } else {
                btn.classList.remove('active');
                btn.textContent = 'üìö Series View';
                displayBooks();
            }
        }
        
        function displaySeriesView() {
            const grid = document.getElementById('books-grid');
            
            // Get filtered books
            let books = library;
            const searchQuery = document.getElementById('search-box').value.toLowerCase();
            if (searchQuery) {
                books = books.filter(book => 
                    book.title.toLowerCase().includes(searchQuery) ||
                    book.author.toLowerCase().includes(searchQuery) ||
                    (book.series && book.series.toLowerCase().includes(searchQuery))
                );
            }
            
            const filter = document.getElementById('filter-select').value;
            if (filter === 'read') {
                books = books.filter(b => b.read);
            } else if (filter === 'unread') {
                books = books.filter(b => !b.read && !b.currentlyReading);
            } else if (filter === 'reading') {
                books = books.filter(b => b.currentlyReading);
            }
            
            // Group books by series
            const seriesMap = {};
            const standalone = [];
            
            books.forEach(book => {
                if (book.series) {
                    const seriesName = book.series.split('#')[0].trim();
                    if (!seriesMap[seriesName]) {
                        seriesMap[seriesName] = [];
                    }
                    seriesMap[seriesName].push(book);
                } else {
                    standalone.push(book);
                }
            });
            
            // Sort books within each series by series number
            Object.keys(seriesMap).forEach(seriesName => {
                seriesMap[seriesName].sort((a, b) => {
                    const getNumber = (series) => {
                        const match = series.match(/#([0-9.]+)/);
                        return match ? parseFloat(match[1]) : 999;
                    };
                    return getNumber(a.series) - getNumber(b.series);
                });
            });
            
            // Build HTML
            let html = '';
            
            // Series sections
            const sortedSeries = Object.keys(seriesMap).sort();
            sortedSeries.forEach((seriesName, index) => {
                const seriesId = 'series-' + index;
                html += '<div class="series-section">';
                html += '<div class="series-header">';
                html += '<div class="series-header-title">' + seriesName + ' (' + seriesMap[seriesName].length + ' books)</div>';
                html += '<button class="mark-series-btn" data-series-id="' + seriesId + '">‚úì Mark Series as Read</button>';
                html += '</div>';
                html += '<div class="series-books">';
                
                seriesMap[seriesName].forEach(book => {
                    html += generateBookCard(book);
                });
                
                html += '</div></div>';
            });
            
            // Standalone books
            if (standalone.length > 0) {
                html += '<div class="series-section">';
                html += '<div class="series-header">Standalone Books (' + standalone.length + ')</div>';
                html += '<div class="series-books">';
                
                standalone.forEach(book => {
                    html += generateBookCard(book);
                });
                
                html += '</div></div>';
            }
            
            grid.innerHTML = html;
            
            // Attach event listeners to mark series buttons
            document.querySelectorAll('.mark-series-btn').forEach((btn, index) => {
                const seriesName = sortedSeries[index];
                btn.addEventListener('click', function() {
                    markSeriesAsRead(seriesName);
                });
            });
        }
        
        function markSeriesAsRead(seriesName) {
            console.log('Marking series as read:', seriesName);
            
            const seriesBooks = library.filter(b => {
                if (!b.series) return false;
                const bookSeriesName = b.series.split('#')[0].trim();
                return bookSeriesName === seriesName;
            });
            
            if (seriesBooks.length === 0) {
                alert('No books found in this series!');
                return;
            }
            
            const unreadCount = seriesBooks.filter(b => !b.read).length;
            
            if (unreadCount === 0) {
                alert('All books in this series are already marked as read!');
                return;
            }
            
            // Show confirmation
            const confirmMsg = 'Mark all ' + unreadCount + ' unread book(s) in "' + seriesName + '" as read?';
            
            // Use custom modal
            document.getElementById('series-confirm-text').textContent = confirmMsg;
            document.getElementById('series-confirm-modal').style.display = 'block';
            
            // Store series name for confirmation
            window.pendingSeriesName = seriesName;
        }
        
        function confirmMarkSeriesAsRead() {
            const seriesName = window.pendingSeriesName;
            
            const seriesBooks = library.filter(b => {
                if (!b.series) return false;
                const bookSeriesName = b.series.split('#')[0].trim();
                return bookSeriesName === seriesName && !b.read;
            });
            
            seriesBooks.forEach(book => {
                book.read = true;
                book.currentlyReading = false;
            });
            
            saveLibrary();
            updateStats();
            displayBooks();
            
            document.getElementById('series-confirm-modal').style.display = 'none';
            console.log('‚úÖ Marked ' + seriesBooks.length + ' books as read in series: ' + seriesName);
        }
        
        function cancelMarkSeriesAsRead() {
            document.getElementById('series-confirm-modal').style.display = 'none';
            window.pendingSeriesName = null;
        }
        
        function generateBookCard(book) {
            let extraInfo = '';
            if (book.dateRead) extraInfo += 'üìÖ ' + book.dateRead + ' ';
            if (book.rereadCount > 0) extraInfo += 'üîÑ ' + book.rereadCount + 'x ';
            if (book.tags && book.tags.length > 0) extraInfo += 'üè∑Ô∏è ' + book.tags.join(', ');
            
            return '<div class="book-card">' +
                '<div class="book-content">' +
                '<div class="book-title">' + book.title + '</div>' +
                '<div class="book-author">' + book.author + '</div>' +
                (book.series ? '<div class="book-series">' + book.series + '</div>' : '') +
                (book.spice ? '<div class="book-spice">' + book.spice + '</div>' : '') +
                '<div class="book-status">' +
                '<label><input type="checkbox" onchange="toggleRead(' + book.id + ')" ' + (book.read ? 'checked' : '') + '> Read</label>' +
                '<label><input type="checkbox" onchange="toggleCurrentlyReading(' + book.id + ')" ' + (book.currentlyReading ? 'checked' : '') + '> Reading</label>' +
                '</div>' +
                (book.read ? '<div class="book-rating">' +
                [1,2,3,4,5].map(star => 
                    '<span class="star ' + (star <= book.rating ? 'filled' : '') + '" onclick="setRating(' + book.id + ', ' + star + ')">‚òÖ</span>'
                ).join('') +
                '</div>' : '') +
                (extraInfo ? '<div class="book-extra-info">' + extraInfo + '</div>' : '') +
                (book.notes ? '<div class="book-extra-info">üí≠ ' + book.notes.substring(0, 50) + (book.notes.length > 50 ? '...' : '') + '</div>' : '') +
                '<button class="edit-btn" onclick="openEditModal(' + book.id + ')">‚úèÔ∏è Edit Details</button>' +
                '</div>';
        }
        
        
        let currentCalendarMonth = new Date().getMonth();
        let currentCalendarYear = new Date().getFullYear();
        
        function openCalendar() {
            currentCalendarMonth = new Date().getMonth();
            currentCalendarYear = new Date().getFullYear();
            renderCalendar();
            updateCalendarStreak();
            document.getElementById('calendar-modal').style.display = 'block';
        }
        
        function updateCalendarStreak() {
            const readingLog = JSON.parse(localStorage.getItem('readingLog') || '[]');
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            let streak = 0;
            let checkDate = new Date(today);
            while (true) {
                const dateStr = checkDate.toISOString().split('T')[0];
                if (readingLog.includes(dateStr)) {
                    streak++;
                    checkDate.setDate(checkDate.getDate() - 1);
                } else {
                    break;
                }
            }
            document.getElementById('calendar-streak').textContent = streak;
        }
        
        function closeCalendar() {
            document.getElementById('calendar-modal').style.display = 'none';
        }
        
        function changeMonth(delta) {
            currentCalendarMonth += delta;
            if (currentCalendarMonth > 11) {
                currentCalendarMonth = 0;
                currentCalendarYear++;
            } else if (currentCalendarMonth < 0) {
                currentCalendarMonth = 11;
                currentCalendarYear--;
            }
            renderCalendar();
        }
        
        function goToToday() {
            currentCalendarMonth = new Date().getMonth();
            currentCalendarYear = new Date().getFullYear();
            renderCalendar();
        }
        
        function renderCalendar() {
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'];
            
            document.getElementById('calendar-month-year').textContent = 
                monthNames[currentCalendarMonth] + ' ' + currentCalendarYear;
            
            const firstDay = new Date(currentCalendarYear, currentCalendarMonth, 1).getDay();
            const daysInMonth = new Date(currentCalendarYear, currentCalendarMonth + 1, 0).getDate();
            const daysInPrevMonth = new Date(currentCalendarYear, currentCalendarMonth, 0).getDate();
            
            const daysContainer = document.getElementById('calendar-days');
            daysContainer.innerHTML = '';
            
            // Previous month days
            for (let i = firstDay - 1; i >= 0; i--) {
                const day = daysInPrevMonth - i;
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day other-month';
                dayDiv.textContent = day;
                daysContainer.appendChild(dayDiv);
            }
            
            // Current month days
            const today = new Date();
            const isCurrentMonth = currentCalendarMonth === today.getMonth() && currentCalendarYear === today.getFullYear();
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = currentCalendarYear + '-' + 
                    String(currentCalendarMonth + 1).padStart(2, '0') + '-' + 
                    String(day).padStart(2, '0');
                
                let classes = 'calendar-day';
                
                // Check if this is today
                if (isCurrentMonth && day === today.getDate()) {
                    classes += ' today';
                }
                
                // Check if user logged reading on this day (for streak)
                const readingLog = JSON.parse(localStorage.getItem('readingLog') || '[]');
                const isLoggedDay = readingLog.includes(dateStr);
                
                // Find all books being read on this day
                const booksOnThisDay = library.filter(book => {
                    // Book finished on this day
                    if (book.dateRead === dateStr) return true;
                    
                    // Book being read on this day (between start and finish or start and today)
                    if (book.dateStarted) {
                        const startDate = new Date(book.dateStarted);
                        const checkDate = new Date(dateStr);
                        const todayDate = new Date();
                        todayDate.setHours(0, 0, 0, 0);
                        
                        if (book.dateRead) {
                            const endDate = new Date(book.dateRead);
                            return startDate <= checkDate && checkDate <= endDate;
                        } else if (book.currentlyReading) {
                            return startDate <= checkDate && checkDate <= todayDate;
                        }
                    }
                    return false;
                });
                
                if (booksOnThisDay.length > 0) {
                    classes += ' has-books';
                }
                if (isLoggedDay) {
                    classes += ' logged-day';
                }
                
                const dayDiv = document.createElement('div');
                dayDiv.className = classes;
                dayDiv.dataset.date = dateStr;
                
                // Add day number
                const dayNumber = document.createElement('div');
                dayNumber.className = 'calendar-day-number';
                dayNumber.textContent = day;
                dayDiv.appendChild(dayNumber);
                
                // Add book covers
                if (booksOnThisDay.length > 0) {
                    const coversDiv = document.createElement('div');
                    coversDiv.className = 'calendar-day-covers';
                    
                    const isMultiple = booksOnThisDay.length > 1;
                    const booksToShow = booksOnThisDay.slice(0, 2); // Show max 2 books
                    
                    booksToShow.forEach(book => {
                        if (book.customCover) {
                            const img = document.createElement('img');
                            img.src = book.customCover;
                            img.className = 'calendar-mini-cover' + (isMultiple ? ' multiple' : '');
                            img.title = book.title;
                            coversDiv.appendChild(img);
                        } else if (book.isbn) {
                            const img = document.createElement('img');
                            img.src = 'https://covers.openlibrary.org/b/isbn/' + book.isbn + '-S.jpg';
                            img.className = 'calendar-mini-cover' + (isMultiple ? ' multiple' : '');
                            img.title = book.title;
                            img.onerror = function() {
                                const placeholder = document.createElement('div');
                                placeholder.className = 'calendar-cover-placeholder' + (isMultiple ? ' multiple' : '');
                                placeholder.textContent = book.title.substring(0,1);
                                placeholder.title = book.title;
                                this.parentNode.replaceChild(placeholder, this);
                            };
                            coversDiv.appendChild(img);
                        } else {
                            const placeholder = document.createElement('div');
                            placeholder.className = 'calendar-cover-placeholder' + (isMultiple ? ' multiple' : '');
                            placeholder.textContent = book.title.substring(0,1);
                            placeholder.title = book.title;
                            coversDiv.appendChild(placeholder);
                        }
                    });
                    
                    // Add "+X more" indicator if there are more than 2 books
                    if (booksOnThisDay.length > 2) {
                        const moreDiv = document.createElement('div');
                        moreDiv.className = 'calendar-more-books';
                        moreDiv.textContent = '+' + (booksOnThisDay.length - 2);
                        moreDiv.title = 'Click day to see all books';
                        coversDiv.appendChild(moreDiv);
                    }
                    
                    dayDiv.appendChild(coversDiv);
                }
                
                dayDiv.addEventListener('click', function() {
                    toggleDayLog(this.dataset.date);
                });
                daysContainer.appendChild(dayDiv);
            }
            
            // Next month days
            const totalCells = firstDay + daysInMonth;
            const remainingCells = totalCells % 7 === 0 ? 0 : 7 - (totalCells % 7);
            for (let day = 1; day <= remainingCells; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day other-month';
                dayDiv.textContent = day;
                daysContainer.appendChild(dayDiv);
            }
        }
        
        
        async function autoFetchISBNs() {
            if (!confirm('This will search Google Books for ISBNs for all books without one. This may take a few minutes. Continue?')) {
                return;
            }
            
            const booksWithoutISBN = library.filter(b => !b.isbn);
            console.log('üìö Fetching ISBNs for ' + booksWithoutISBN.length + ' books...');
            
            let found = 0;
            let notFound = 0;
            
            for (let i = 0; i < booksWithoutISBN.length; i++) {
                const book = booksWithoutISBN[i];
                console.log('Searching: ' + book.title + ' by ' + book.author);
                
                try {
                    // Search Google Books API
                    const query = encodeURIComponent(book.title + ' ' + book.author);
                    const response = await fetch('https://www.googleapis.com/books/v1/volumes?q=' + query + '&maxResults=1');
                    const data = await response.json();
                    
                    if (data.items && data.items.length > 0) {
                        const volumeInfo = data.items[0].volumeInfo;
                        
                        // Try to get ISBN-13 first, then ISBN-10
                        const identifiers = volumeInfo.industryIdentifiers || [];
                        const isbn13 = identifiers.find(id => id.type === 'ISBN_13');
                        const isbn10 = identifiers.find(id => id.type === 'ISBN_10');
                        
                        if (isbn13) {
                            book.isbn = isbn13.identifier;
                            console.log('‚úÖ Found ISBN-13: ' + book.isbn);
                            found++;
                        } else if (isbn10) {
                            book.isbn = isbn10.identifier;
                            console.log('‚úÖ Found ISBN-10: ' + book.isbn);
                            found++;
                        } else {
                            console.log('‚ùå No ISBN found');
                            notFound++;
                        }
                    } else {
                        console.log('‚ùå No results');
                        notFound++;
                    }
                    
                    // Wait a bit to avoid rate limiting
                    await new Promise(resolve => setTimeout(resolve, 200));
                    
                } catch (error) {
                    console.error('Error fetching ISBN:', error);
                    notFound++;
                }
            }
            
            saveLibrary();
            displayBooks();
            
            alert('‚úÖ Done!\n\nFound: ' + found + ' ISBNs\nNot found: ' + notFound + '\n\nYou can now edit any book to correct or add ISBNs manually.');
        }
        
        let currentSearchOffset = 0;
        let currentSearchTitle = '';
        let currentSearchAuthor = '';
        let currentSearchMode = '';
        
        async function lookupISBN(mode, loadMore = false) {
            const title = document.getElementById(mode + '-title').value.trim();
            const author = document.getElementById(mode + '-author').value.trim();
            const resultsDiv = document.getElementById(mode === 'add' ? 'add-isbn-results' : 'isbn-results');
            
            if (!title || !author) {
                resultsDiv.innerHTML = '<div style="color: #fbbf24; padding: 10px; background: rgba(251, 191, 36, 0.1); border-radius: 6px;">Please enter both title and author first!</div>';
                return;
            }
            
            // Reset if new search
            if (!loadMore || title !== currentSearchTitle || author !== currentSearchAuthor || mode !== currentSearchMode) {
                currentSearchOffset = 0;
                currentSearchTitle = title;
                currentSearchAuthor = author;
                currentSearchMode = mode;
            }
            
            if (!loadMore) {
                resultsDiv.innerHTML = '<div style="color: #66cccc; padding: 10px;">üîç Searching for ISBNs...</div>';
            } else {
                resultsDiv.innerHTML += '<div style="color: #66cccc; padding: 10px; margin-top: 10px;">üîç Loading more...</div>';
            }
            
            try {
                // Use Google Books API for better coverage
                const query = encodeURIComponent(title + ' ' + author);
                const response = await fetch('https://www.googleapis.com/books/v1/volumes?q=' + query + '&maxResults=10&startIndex=' + currentSearchOffset);
                const data = await response.json();
                
                if (data.items && data.items.length > 0) {
                    let html = '';
                    
                    if (!loadMore) {
                        html = '<div style="color: #a3d5d3; margin-bottom: 8px; font-size: 0.9em;">Select the correct edition:</div>';
                    } else {
                        // Remove the "Loading more..." message
                        const content = resultsDiv.innerHTML;
                        resultsDiv.innerHTML = content.substring(0, content.lastIndexOf('<div style="color: #66cccc;'));
                    }
                    
                    let foundAny = false;
                    
                    data.items.forEach((item) => {
                        const volumeInfo = item.volumeInfo;
                        const identifiers = volumeInfo.industryIdentifiers || [];
                        const isbn13 = identifiers.find(id => id.type === 'ISBN_13');
                        const isbn10 = identifiers.find(id => id.type === 'ISBN_10');
                        const isbn = isbn13 ? isbn13.identifier : (isbn10 ? isbn10.identifier : null);
                        
                        if (isbn) {
                            foundAny = true;
                            const displayTitle = volumeInfo.title || title;
                            const displayAuthor = volumeInfo.authors ? volumeInfo.authors.join(', ') : author;
                            const pubYear = volumeInfo.publishedDate ? volumeInfo.publishedDate.substring(0, 4) : 'Unknown';
                            const publisher = volumeInfo.publisher || 'Unknown';
                            const thumbnail = volumeInfo.imageLinks ? volumeInfo.imageLinks.thumbnail : null;
                            
                            html += '<div style="background: rgba(45, 95, 122, 0.3); padding: 10px; margin: 5px 0; border-radius: 6px; cursor: pointer; border: 2px solid rgba(102, 204, 204, 0.3); display: flex; gap: 12px; align-items: center;" ' +
                                'onclick="selectISBN(\'' + isbn + '\', \'' + mode + '\')" ' +
                                'onmouseover="this.style.borderColor=\'#66cccc\'" ' +
                                'onmouseout="this.style.borderColor=\'rgba(102, 204, 204, 0.3)\'">';
                            
                            // Cover image with fallback - using same logic as book cards
                            html += '<div style="position: relative; flex-shrink: 0;">';
                            if (thumbnail) {
                                html += '<img src="' + thumbnail + '" ' +
                                    'onerror="this.onerror=null; this.src=\'https://covers.openlibrary.org/b/isbn/' + isbn + '-M.jpg\'" ' +
                                    'style="width: 60px; height: 90px; object-fit: cover; border-radius: 4px;">';
                            } else {
                                html += '<img src="https://covers.openlibrary.org/b/isbn/' + isbn + '-M.jpg" ' +
                                    'onerror="this.style.display=\'none\'; this.nextElementSibling.style.display=\'flex\'" ' +
                                    'style="width: 60px; height: 90px; object-fit: cover; border-radius: 4px;">' +
                                    '<div style="width: 60px; height: 90px; background: rgba(102, 204, 204, 0.2); border: 1px solid rgba(102, 204, 204, 0.4); border-radius: 4px; display: none; align-items: center; justify-content: center; font-size: 1.5em; font-weight: bold; color: #66cccc;">?</div>';
                            }
                            
                            // Add badge indicating cover source
                            const coverSource = thumbnail ? 'üìó Google' : 'üìö Library';
                            html += '<div style="position: absolute; bottom: 2px; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; font-size: 0.6em; text-align: center; padding: 2px; border-radius: 0 0 4px 4px;">' + coverSource + '</div>';
                            html += '</div>';
                            
                            html += '<div style="flex: 1;">' +
                                '<div style="font-weight: bold; color: #66cccc;">' + displayTitle + '</div>' +
                                '<div style="font-size: 0.85em; color: #a3d5d3; margin-top: 4px;">' +
                                displayAuthor + '<br>ISBN: ' + isbn + ' ‚Ä¢ ' + pubYear + ' ‚Ä¢ ' + publisher +
                                '</div>' +
                                '</div>' +
                                '</div>';
                        }
                    });
                    
                    if (!foundAny) {
                        if (!loadMore) {
                            html = '<div style="color: #fbbf24; padding: 10px; background: rgba(251, 191, 36, 0.1); border-radius: 6px;">No ISBNs found. Try editing the title/author or enter manually.</div>';
                            resultsDiv.innerHTML = html;
                        }
                    } else {
                        // Add Load More button
                        html += '<button onclick="lookupISBN(\'' + mode + '\', true)" ' +
                            'style="width: 100%; padding: 10px; margin-top: 10px; background: rgba(102, 204, 204, 0.3); border: 2px solid #66cccc; color: #e8f4f8; border-radius: 6px; cursor: pointer; font-size: 0.9em;">' +
                            '‚¨áÔ∏è Load More Results</button>';
                        
                        if (loadMore) {
                            resultsDiv.innerHTML += html;
                        } else {
                            resultsDiv.innerHTML = html;
                        }
                        
                        currentSearchOffset += 10;
                    }
                } else {
                    if (!loadMore) {
                        resultsDiv.innerHTML = '<div style="color: #fbbf24; padding: 10px; background: rgba(251, 191, 36, 0.1); border-radius: 6px;">No results found. Try editing the title/author or enter manually.</div>';
                    } else {
                        resultsDiv.innerHTML = resultsDiv.innerHTML.substring(0, resultsDiv.innerHTML.lastIndexOf('<div style="color: #66cccc;')) +
                            '<div style="color: #a3d5d3; padding: 10px; margin-top: 10px; text-align: center;">No more results available.</div>';
                    }
                }
            } catch (error) {
                console.error('ISBN lookup error:', error);
                resultsDiv.innerHTML = '<div style="color: #ff6b6b; padding: 10px; background: rgba(255, 107, 107, 0.1); border-radius: 6px;">Error searching for ISBNs. Please try again.</div>';
            }
        }
        
        function selectISBN(isbn, mode) {
            try {
                const isbnField = document.getElementById(mode + '-isbn');
                if (isbnField) {
                    isbnField.value = isbn;
                    console.log('‚úÖ ISBN set:', isbn);
                } else {
                    console.error('‚ùå Could not find ISBN field for mode:', mode);
                }
                
                const resultsDiv = document.getElementById(mode === 'add' ? 'add-isbn-results' : 'isbn-results');
                if (resultsDiv) {
                    resultsDiv.innerHTML = '<div style="color: #4ade80; padding: 10px; background: rgba(74, 222, 128, 0.1); border-radius: 6px; border: 2px solid #4ade80; font-weight: bold;">‚úÖ ISBN selected: ' + isbn + '<br><span style="font-size: 0.9em; font-weight: normal;">Save your changes to apply this ISBN</span></div>';
                } else {
                    console.error('‚ùå Could not find results div for mode:', mode);
                }
            } catch (error) {
                console.error('Error in selectISBN:', error);
                alert('Error selecting ISBN. Please try again or enter manually.');
            }
        }
        
        // Load library from Firebase on page load
        async function loadFromFirebase() {
            if (!window.firebaseDB) {
                console.log('Firebase not ready, using localStorage');
                return;
            }
            
            try {
                const { doc, getDoc } = await import("https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js");
                
                // Load library
                const libraryRef = doc(window.firebaseDB, "userData", "library");
                const librarySnap = await getDoc(libraryRef);
                
                if (librarySnap.exists()) {
                    const data = librarySnap.data();
                    library = data.books;
                    console.log('‚úÖ Loaded ' + library.length + ' books from Firebase');
                } else {
                    console.log('No Firebase library data, using localStorage');
                }
                
                // Load reading log
                const logRef = doc(window.firebaseDB, "userData", "readingLog");
                const logSnap = await getDoc(logRef);
                
                if (logSnap.exists()) {
                    const logData = logSnap.data();
                    localStorage.setItem('readingLog', JSON.stringify(logData.dates));
                    console.log('‚úÖ Loaded ' + logData.dates.length + ' reading log dates from Firebase');
                } else {
                    console.log('No Firebase reading log, using localStorage');
                }
                
                updateStats();
                displayBooks();
                calculateStreak();
            } catch (error) {
                console.error('Firebase load error:', error);
            }
        }
        
        // Initialize when Firebase is ready
        setTimeout(() => {
            if (window.firebaseDB) {
                console.log('üî• Firebase connected, loading data...');
                loadFromFirebase();
            } else {
                console.log('‚ö†Ô∏è Firebase not ready, using hardcoded data');
            }
        }, 1000);
        
        console.log('üéâ Ready!');
    </script>
</body>
</html>